#include <bits/stdc++.h>using namespace std; #define int long long int// #define endl '\n'#define all(x) x.begin(), x.end() int qr(int ty, int l, int r){    cout << ty << " " << l << " " << r << endl;    int x;    cin >> x;    return x;} void solve(){    int n;    cin >> n;    int l = 1, r = n, stl = 0;    while (r >= l)    {        int mid = (l + r) / 2;        if (qr(1, 1, mid) != qr(2, 1, mid))        {            r = mid - 1;        }        else        {            stl = mid;            l = mid + 1;        }    }    int str = stl + (qr(2, 1, n) - qr(1, 1, n));    cout << "! " << stl + 1 << " " << str << endl;}int32_t main(){    ios_base::sync_with_stdio(0);    cin.tie(0);    int t = 1;    cin >> t;    while (t--)        solve();    return 0;}