#include <bits/stdc++.h>using namespace std; #define int long long int// #define endl '\n'#define all(x) x.begin(), x.end() const int inf = 1e9; int ask(int l, int r){    cout << "? " << l << " " << r << endl;    int x; cin >> x;    return x;} void solve(){    int n, q; cin >> n >> q;    vector <int> l(n+1, inf), r(n+1, -inf);     for(int i = 1; i <= q; i++){        int x, y; cin >> x >> y;        r[x] = max(r[x], y);        l[y] = min(l[y], x);    }     int ans = 0;    if(ask(1, n/2)>0){        for(int i = 1; i <= n/2; i++){            if(r[i] >= 0){                ans = max(ans, ask(i, r[i]));            }        }        cout << "! " << ans << endl;    }    else{        for(int i = n/2+1; i <= n; i++){            if(l[i] <= n){                ans=max(ans, ask(l[i], i));            }        }        cout <<"! " << ans << endl;    }} int32_t main(){    ios_base::sync_with_stdio(0);    cin.tie(0);    int t = 1;    cin >> t;    while (t--)        solve();    return 0;}