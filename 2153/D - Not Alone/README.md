<h3><a href="https://codeforces.com/contest/2153/problem/D" target="_blank" rel="noopener noreferrer">Not Alone</a></h3>

<div class="header"><div class="title">D. Not Alone</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file input-standard"><div class="property-title">input</div>standard input</div><div class="output-file output-standard"><div class="property-title">output</div>standard output</div></div><div><p>  </p><p>A circular array $$$b$$$ of length $$$m$$$ is <span class="tex-font-style-it">nice</span> if every element has at least one adjacent element$$$^{\text{∗}}$$$ that is equal to it. Formally, for every $$$1\le i\le m$$$, at least one of the following holds: $$$b_i = b_{(i+m-2)\bmod m\;+1}$$$, or $$$b_i = b_{i\bmod m\;+1}$$$, where $$$x \bmod y$$$ denotes the remainder from dividing $$$x$$$ by $$$y$$$. </p><p>You are given a circular array $$$a$$$ of length $$$n$$$. In one operation, you may increase or decrease any element of $$$a$$$ by $$$1$$$. Your task is to determine the minimum number of operations required to make array $$$a$$$ nice. More formally, find the minimum value of $$$\sum_{i=1}^n |b_i - a_i|$$$ among all nice circular arrays $$$b$$$ of length $$$n$$$.</p><div class="statement-footnote"><p>$$$^{\text{∗}}$$$In a circular array of length $$$m$$$: </p><ul> <li> For each index $$$2\le i\le m - 1$$$, the element at index $$$i$$$ is adjacent to the elements at indices $$$i - 1$$$ and $$$i + 1$$$. </li><li> The element at index $$$1$$$ is adjacent to the elements at indices $$$2$$$ and $$$m$$$. </li><li> The element at index $$$m$$$ is adjacent to the elements at indices $$$m - 1$$$ and $$$1$$$. </li></ul> </div></div><div class="input-specification"><div class="section-title">Input</div><p>Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \le t \le 10^4$$$). The description of the test cases follows. </p><p>The first line of each test case contains a single integer $$$n$$$ ($$$3\le n\le 2\cdot 10^5$$$) — the length of the circular array $$$a$$$.</p><p>The second line of each test case contains $$$n$$$ integers $$$a_1, a_2, \ldots, a_n$$$ ($$$1\le a_i\le 10^9$$$) — the elements of the circular array $$$a$$$.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$2\cdot 10^5$$$. </p></div><div class="output-specification"><div class="section-title">Output</div><p>For each test case, output a single integer representing the minimum number of operations required to make array $$$a$$$ nice.</p></div><div class="sample-tests"><div class="section-title">Example</div><div class="sample-test"><div class="input"><div class="title">Input<div title="Copy" data-clipboard-target="#id006535337507399569" id="id00820273391487277" class="input-output-copier">Copy</div></div><pre id="id006535337507399569"><div class="test-example-line test-example-line-even test-example-line-0">4</div><div class="test-example-line test-example-line-odd test-example-line-1">5</div><div class="test-example-line test-example-line-odd test-example-line-1">1 1 1 1 1</div><div class="test-example-line test-example-line-even test-example-line-2">4</div><div class="test-example-line test-example-line-even test-example-line-2">2 100 99 3</div><div class="test-example-line test-example-line-odd test-example-line-3">5</div><div class="test-example-line test-example-line-odd test-example-line-3">2 2 5 9 5</div><div class="test-example-line test-example-line-even test-example-line-4">6</div><div class="test-example-line test-example-line-even test-example-line-4">1 1 1 2 1 2</div></pre></div><div class="output"><div class="title">Output<div title="Copy" data-clipboard-target="#id004346809508131769" id="id007308554675603931" class="input-output-copier">Copy</div></div><pre id="id004346809508131769"><div class="test-example-line test-example-line-odd test-example-line-1">0</div><div class="test-example-line test-example-line-even test-example-line-2">2</div><div class="test-example-line test-example-line-odd test-example-line-3">4</div><div class="test-example-line test-example-line-even test-example-line-4">1</div></pre></div></div></div><div class="note"><div class="section-title">Note</div><p>In the first test case, all elements of $$$a$$$ are equal. Therefore, the circular array $$$a$$$ is already nice and no operations are required.</p><p>In the second test case, we can perform the following sequence of operations:</p><ul> <li> Increase $$$a_1$$$ by $$$1$$$. Now, $$$a=[3, 100, 99, 3]$$$. </li><li> Decrease $$$a_2$$$ by $$$1$$$. Now, $$$a=[3, 99, 99, 3]$$$. </li></ul><p>After these operations, every element has at least one adjacent element with the same value:</p><ul> <li> $$$a_1$$$ is equal to $$$a_4$$$. </li><li> $$$a_2$$$ is equal to $$$a_3$$$. </li><li> $$$a_3$$$ is equal to $$$a_2$$$. </li><li> $$$a_4$$$ is equal to $$$a_1$$$. </li></ul><p>In the third test case, the circular array $$$a$$$ can become nice by decreasing $$$a_4$$$ four times. This results in $$$a = [2, 2, 5, 5, 5]$$$ which is nice as every element has at least one adjacent element with the same value.</p></div>