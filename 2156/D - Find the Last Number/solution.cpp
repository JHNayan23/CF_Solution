#include <bits/stdc++.h>using namespace std; #define int long long// #define endl '\n'#define all(x) x.begin(), x.end() int ask(int idx, int val){    cout << "? " << idx << " " << val << endl;    cout.flush();    int res;    cin >> res;    if (res == -1)        exit(0);    return res;} void solve(){    int n;    cin >> n;    set<int> s;    for (int i = 1; i < n; i++)        s.insert(i);    int res = 0;    int b = 0;    while (b < 31)    {        int rem = res & ((1 << b) - 1);        int tot = (rem == 0) ? (n / (1LL << b)) : ((rem > n) ? 0 : ((n - rem) / (1LL << b) + 1));        if (tot == 1)        {            res = (rem ? rem : (1LL << b));            break;        }        else if (tot < 1)        {            break;        }        map<int, int> mp;        for (int x : s)            mp[x] = ask(x, (1LL << b));        int sum = 0;        for (auto &[idx, val] : mp)            sum += val;        int nxt = 1LL << (b + 1);        int r2 = rem | (1LL << b);        int exp = (r2 == 0) ? (n / nxt) : ((r2 > n) ? 0 : ((n - r2) / nxt + 1));        int bit;        if (sum == exp)            bit = 0;        else            bit = 1;        res |= (bit << b);        set<int> ns;        for (auto &[idx, val] : mp)            if (val == bit)                ns.insert(idx);        s = ns;        b++;    }    cout << "! " << res << endl;} int32_t main(){    ios::sync_with_stdio(false);    cin.tie(nullptr);    int t;    cin >> t;    while (t--)        solve();    return 0;}