<h3><a href="https://codeforces.com/contest/2155/problem/C" target="_blank" rel="noopener noreferrer">The Ancient Wizards' Capes</a></h3>

<div class="header"><div class="title">C. The Ancient Wizards' Capes</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>256 megabytes</div><div class="input-file input-standard"><div class="property-title">input</div>standard input</div><div class="output-file output-standard"><div class="property-title">output</div>standard output</div></div><div><p> </p><p>There are $$$n$$$ wizards in a row numbered $$$1$$$ to $$$n$$$ from left to right. Each wizard has an invisibility cape which can be worn either on his left side or on his right side. Harry walks from the position of wizard $$$1$$$ until the position of wizard $$$n$$$ ($$$1 \le n \le 10^5$$$), and registers how many wizards he sees from each wizard's position. A wizard in position $$$j$$$ is visible from position $$$i$$$ if:</p><p> </p><ul> <li> Wizard $$$j$$$ wears his cape on his left side and $$$i \ge j$$$. </li><li> Wizard $$$j$$$ wears his cape on his right side and $$$i \le j$$$. </li></ul><p>In particular, note that wizard $$$i$$$ is visible from position $$$i$$$. </p><p>Harry's list is very old but, after much work, you managed to decipher it. The list is an array $$$a$$$ of $$$n$$$ elements, where the $$$i$$$-th element $$$a_i$$$ ($$$1 \le a_i \le n$$$) is the number of wizards that Harry saw from the position of wizard $$$i$$$. </p><p>Your task is to determine how many of all the possible cape arrangements that Harry could have seen are consistent with the data recorded by the list, modulo $$$676\,767\,677$$$.</p></div><div class="input-specification"><div class="section-title">Input</div><p>Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \le t \le 10^4$$$). The description of the test cases follows. </p><p>The first line of each test case contains a single integer $$$n$$$ ($$$1 \le n \le 10^5$$$) — the length of $$$a$$$.</p><p>The second line contains $$$n$$$ integers $$$a_1, a_2, \ldots, a_n$$$ ($$$1 \le a_i \le n$$$) — the elements of $$$a$$$.</p><p>It is guaranteed that the sum of $$$n$$$ over all test cases does not exceed $$$10^5$$$. </p></div><div class="output-specification"><div class="section-title">Output</div><p>For each test case, print one integer — the number of arrangements for the wizards' capes that satisfy the condition, modulo $$$676\,767\,677$$$.</p></div><div class="sample-tests"><div class="section-title">Example</div><div class="sample-test"><div class="input"><div class="title">Input<div title="Copy" data-clipboard-target="#id0030730425518350757" id="id009916655587210885" class="input-output-copier">Copy</div></div><pre id="id0030730425518350757"><div class="test-example-line test-example-line-even test-example-line-0">7</div><div class="test-example-line test-example-line-odd test-example-line-1">1</div><div class="test-example-line test-example-line-odd test-example-line-1">1</div><div class="test-example-line test-example-line-even test-example-line-2">4</div><div class="test-example-line test-example-line-even test-example-line-2">4 4 3 2</div><div class="test-example-line test-example-line-odd test-example-line-3">3</div><div class="test-example-line test-example-line-odd test-example-line-3">1 3 2</div><div class="test-example-line test-example-line-even test-example-line-4">2</div><div class="test-example-line test-example-line-even test-example-line-4">2 1</div><div class="test-example-line test-example-line-odd test-example-line-5">3</div><div class="test-example-line test-example-line-odd test-example-line-5">2 2 2</div><div class="test-example-line test-example-line-even test-example-line-6">3</div><div class="test-example-line test-example-line-even test-example-line-6">3 2 3</div><div class="test-example-line test-example-line-odd test-example-line-7">3</div><div class="test-example-line test-example-line-odd test-example-line-7">3 2 2</div></pre></div><div class="output"><div class="title">Output<div title="Copy" data-clipboard-target="#id0004420658580773151" id="id0048172051360352275" class="input-output-copier">Copy</div></div><pre id="id0004420658580773151"><div class="test-example-line test-example-line-odd test-example-line-1">2</div><div class="test-example-line test-example-line-even test-example-line-2">1</div><div class="test-example-line test-example-line-odd test-example-line-3">0</div><div class="test-example-line test-example-line-even test-example-line-4">1</div><div class="test-example-line test-example-line-odd test-example-line-5">2</div><div class="test-example-line test-example-line-even test-example-line-6">0</div><div class="test-example-line test-example-line-odd test-example-line-7">0</div></pre></div></div></div><div class="note"><div class="section-title">Note</div><p>The image below shows an arrangement of capes that matches Harry's list in the second test case.</p><center> <img class="tex-graphics" src="https://espresso.codeforces.com/0680da940a0d05d53a0361d89529a6fb2b48278a.png" style="zoom: 30.0%;max-width: 100.0%;max-height: 100.0%;"> </center><p>Wizard 1 has the invisibility cape on his left side, while wizards $$$2$$$, $$$3$$$, and $$$4$$$ wear it on their right side.</p><ul> <li> From position $$$1$$$, we can see wizards $$$1$$$, $$$2$$$, $$$3$$$, and $$$4$$$. </li><li> From position $$$2$$$, we can see wizards $$$1$$$, $$$2$$$, $$$3$$$, and $$$4$$$. </li><li> From position $$$3$$$, we can see wizards $$$1$$$, $$$3$$$, and $$$4$$$. </li><li> From position $$$4$$$, we can see wizards $$$1$$$ and $$$4$$$. </li></ul><p>Thus, Harry's list ends up being $$$[4, 4, 3, 2]$$$. It can be proved that this is the only possible arrangement.</p><p>In the third test case, it can be proved that Harry could not have obtained his list from any cape arrangement. </p><p>In the fifth case, note that there are two possible cape arrangements from which Harry could have gotten his list:</p><ul> <li> $$$1 \mid \quad \mid 2 \quad 3 \, \mid$$$ </li><li> $$$\mid \, 1 \quad 2 \mid \quad \mid 3$$$ </li></ul></div>