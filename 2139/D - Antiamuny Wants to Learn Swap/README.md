<h3><a href="https://codeforces.com/contest/2139/problem/D" target="_blank" rel="noopener noreferrer">Antiamuny Wants to Learn Swap</a></h3>

<div class="header"><div class="title">D. Antiamuny Wants to Learn Swap</div><div class="time-limit"><div class="property-title">time limit per test</div>2 seconds</div><div class="memory-limit"><div class="property-title">memory limit per test</div>512 megabytes</div><div class="input-file input-standard"><div class="property-title">input</div>standard input</div><div class="output-file output-standard"><div class="property-title">output</div>standard output</div></div><div><p>  </p><p>For an array $$$b$$$ of length $$$m$$$, you may perform the following two operations:</p><ol> <li> Select an index $$$1\le i\le m - 1$$$. Then, swap the values of $$$b_i$$$ and $$$b_{i + 1}$$$. </li><li> Select an index $$$1\le i\le m - 2$$$. Then, swap the values of $$$b_i$$$ and $$$b_{i + 2}$$$. </li></ol> However, you can only perform operation $$$2$$$ <span class="tex-font-style-bf">at most once</span>.<p>We define $$$f(b)$$$ as the minimum number of operations (using both operation 1 and operation 2) required to sort array $$$b$$$ in non-decreasing order, and $$$g(b)$$$ as the minimum number of operations required to sort array $$$b$$$ in non-decreasing order <span class="tex-font-style-bf">using only operation 1</span>.</p><p>The array $$$b$$$ is <span class="tex-font-style-it">perfect</span> if $$$f(b) = g(b)$$$. In other words, the ability to use operation 2 does not reduce the number of operations required to sort array $$$b$$$ compared to using only adjacent swaps.</p><p>You are given a permutation $$$a$$$ of length $$$n$$$$$$^{\text{∗}}$$$, and must answer $$$q$$$ queries. Each query consists of two integers $$$l$$$ and $$$r$$$ ($$$1\le l\le r\le n$$$), representing the subarray $$$a[l\ldots r]$$$$$$^{\text{†}}$$$. For each query, determine whether the subarray $$$a[l\ldots r]$$$ is perfect.</p><div class="statement-footnote"><p>$$$^{\text{∗}}$$$A permutation of length $$$n$$$ is an array consisting of $$$n$$$ distinct integers from $$$1$$$ to $$$n$$$ in arbitrary order. For example, $$$[2,3,1,5,4]$$$ is a permutation, but $$$[1,2,2]$$$ is not a permutation ($$$2$$$ appears twice in the array), and $$$[1,3,4]$$$ is also not a permutation ($$$n=3$$$ but there is $$$4$$$ in the array). </p><p>$$$^{\text{†}}$$$The subarray $$$a[l\ldots r]$$$ includes all elements from index $$$l$$$ to $$$r$$$, i.e., $$$[a_l, a_{l + 1}, a_{l + 2}, \ldots, a_r]$$$.</p></div></div><div class="input-specification"><div class="section-title">Input</div><p>Each test contains multiple test cases. The first line contains the number of test cases $$$t$$$ ($$$1 \le t \le 5 \cdot 10^4$$$). The description of the test cases follows. </p><p>The first line of each test case contains two integers $$$n$$$, $$$q$$$ ($$$1 \le n, q \le 5 \cdot 10^5$$$) — the length of array $$$a$$$ and the number of queries.</p><p>The second line of each test case contains $$$n$$$ integers $$$a_1, a_2, \ldots ,a_n$$$ ($$$1 \le a_i \le n$$$) — the elements in permutation $$$a$$$. </p><p>Each of the next $$$q$$$ lines contains two integers $$$l$$$ and $$$r$$$ ($$$1 \leq l \leq r \leq n$$$) — the left and right endpoints of the queried subarray.</p><p>It is guaranteed that both the sum of $$$n$$$ and the sum of $$$q$$$ over all test cases do not exceed $$$5\cdot 10^5$$$.</p></div><div class="output-specification"><div class="section-title">Output</div><p>For each test case, output "<span class="tex-font-style-tt">YES</span>" if queried subarray $$$a[l\ldots r]$$$ is perfect, and "<span class="tex-font-style-tt">NO</span>" otherwise.</p><p>You can output the answer in any case (upper or lower). For example, the strings "<span class="tex-font-style-tt">yEs</span>", "<span class="tex-font-style-tt">yes</span>", "<span class="tex-font-style-tt">Yes</span>", and "<span class="tex-font-style-tt">YES</span>" will be recognized as positive responses. </p></div><div class="sample-tests"><div class="section-title">Example</div><div class="sample-test"><div class="input"><div class="title">Input<div title="Copy" data-clipboard-target="#id002203480668725163" id="id006292073585864151" class="input-output-copier">Copy</div></div><pre id="id002203480668725163"><div class="test-example-line test-example-line-even test-example-line-0">2</div><div class="test-example-line test-example-line-odd test-example-line-1">5 5</div><div class="test-example-line test-example-line-odd test-example-line-1">1 5 4 3 2</div><div class="test-example-line test-example-line-odd test-example-line-1">1 2</div><div class="test-example-line test-example-line-odd test-example-line-1">1 5</div><div class="test-example-line test-example-line-odd test-example-line-1">3 5</div><div class="test-example-line test-example-line-odd test-example-line-1">1 4</div><div class="test-example-line test-example-line-odd test-example-line-1">2 5</div><div class="test-example-line test-example-line-even test-example-line-2">5 5</div><div class="test-example-line test-example-line-even test-example-line-2">3 2 1 4 5</div><div class="test-example-line test-example-line-even test-example-line-2">1 1</div><div class="test-example-line test-example-line-even test-example-line-2">4 5</div><div class="test-example-line test-example-line-even test-example-line-2">1 4</div><div class="test-example-line test-example-line-even test-example-line-2">2 5</div><div class="test-example-line test-example-line-even test-example-line-2">3 4</div></pre></div><div class="output"><div class="title">Output<div title="Copy" data-clipboard-target="#id005642310423031514" id="id00153864751572651" class="input-output-copier">Copy</div></div><pre id="id005642310423031514">YES
NO
NO
NO
NO
YES
YES
NO
YES
YES
</pre></div></div></div><div class="note"><div class="section-title">Note</div><p>In the first test case:</p><ul> <li> Query 1: $$$a[1\ldots 2] = [1, 5]$$$ is already sorted in increasing order. Thus, $$$f(a[1\ldots 2]) = g(a[1\ldots 2]) = 0$$$ and the subarray $$$a[1\ldots 2]$$$ is perfect.</li><li> Query 2: $$$a[1\ldots 5] = [1, 5, 4, 3, 2]$$$. $$$f(a[1\ldots 5]) = 4$$$ as we can sort the array using the following sequence of operations:<p>$$$$$$[1,\textbf{5},4,\textbf{3},2] \xrightarrow{\text{op} 2} [1,3,4,\textbf{5},\textbf{2}] \xrightarrow{\text{op} 1} [1,3,\textbf{4},\textbf{2},5]\xrightarrow{\text{op} 1} [1,\textbf{3},\textbf{2},4,5] \xrightarrow{\text{op} 1}[1,2,3,4,5]$$$$$$ </p><p>On the other hand, $$$g(a[1\ldots 5]) = 6$$$ as it requires at least $$$6$$$ adjacent swaps to sort $$$a[1\ldots 5]$$$. Since $$$f(a[1\ldots 5]) \neq g(a[1\ldots 5])$$$, the subarray $$$a[1\ldots 5]$$$ is not perfect.</p></li><li> Query 3: $$$a[3\ldots 5] = [4, 3, 2]$$$. $$$f(a[3\ldots 5]) = 1$$$ as we can sort the array using the following sequence of operations:<p>$$$$$$[\textbf{4}, 3,\textbf{2}] \xrightarrow{\text{op} 2} [2, 3, 4]$$$$$$ </p><p>On the other hand, $$$g(a[3\ldots 5]) = 3$$$ as it requires at least $$$3$$$ adjacent swaps to sort $$$a[3\ldots 5]$$$. Since $$$f(a[3\ldots 5]) \neq g(a[3\ldots 5])$$$, the subarray $$$a[3\ldots 5]$$$ is not perfect. </p></li></ul></div>